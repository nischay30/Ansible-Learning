---

# This will install the docker,docker-compose and consul on each appfabric
# this will add the vagrant to the docker group and start consul agent on workers
 - hosts: docker-workers
   become: true
   tasks:
     - name: Copy the service Register File in docker Workers
       copy: src=./files/dockerRegisteryConsul/dockerWorker/dockerService.sh dest=/etc/systemd/system mode=0755 force=yes  

     - name: Create Service json from script
       shell: >
         bash /etc/systemd/system/dockerService.sh 

 - hosts: docker-master
   become: true
   tasks:
     - name: Copy the service Register File in docker Workers
       copy: src=./files/dockerRegisteryConsul/dockerMaster/dockerService.sh dest=/etc/systemd/system mode=0755 force=yes

     - name: Create Service json from script
       shell: >
         bash /etc/systemd/system/dockerService.sh

